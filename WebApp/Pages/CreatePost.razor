@page "/CreatePost"
@using Core
@using System.ComponentModel.DataAnnotations
@using MongoDB.Bson

<h3 style="text-align: center; color: #333; margin-bottom: 20px;">Post an Item</h3>

<div class="container" style="max-width: 800px; margin: 50px auto; padding: 30px; background-color: #ffffff; border-radius: 8px; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);">
    <EditForm Model="newPost" OnValidSubmit="HandleSubmit">
        <DataAnnotationsValidator />
        <ValidationSummary />

        <div class="form-group" style="margin-bottom: 20px;">
            <label for="name" style="font-weight: 600; color: #333; font-size: 1.1em;">Name</label>
            <InputText id="name" class="form-control" @bind-Value="newPost.Name" style="width: 100%; padding: 12px; margin-top: 8px; border: 1px solid #ccc; border-radius: 4px;" />
            <ValidationMessage For="() => newPost.Name" style="color: #ff0000; font-size: 0.9em;" />
        </div>

        <div class="form-group" style="margin-bottom: 20px;">
            <label for="price" style="font-weight: 600; color: #333; font-size: 1.1em;">Price</label>
            <InputNumber id="price" class="form-control" @bind-Value="newPost.Price" style="width: 100%; padding: 12px; margin-top: 8px; border: 1px solid #ccc; border-radius: 4px;" />
            <ValidationMessage For="() => newPost.Price" style="color: #ff0000; font-size: 0.9em;" />
        </div>

        <div class="form-group" style="margin-bottom: 20px;">
            <label for="description" style="font-weight: 600; color: #333; font-size: 1.1em;">Description</label>
            <InputTextArea id="description" class="form-control" @bind-Value="newPost.Description" style="width: 100%; padding: 12px; margin-top: 8px; border: 1px solid #ccc; border-radius: 4px;" />
            <ValidationMessage For="() => newPost.Description" style="color: #ff0000; font-size: 0.9em;" />
        </div>

        <div class="form-group" style="margin-bottom: 20px;">
            <label for="imageUrl" style="font-weight: 600; color: #333; font-size: 1.1em;">Image URL (Optional)</label>
            <InputText id="imageUrl" class="form-control" @bind-Value="newPost.ImageUrl" style="width: 100%; padding: 12px; margin-top: 8px; border: 1px solid #ccc; border-radius: 4px;" />
        </div>
        
        
        <p style="font-weight: 600; color: #333; font-size: 1.1em;">Choose Category: @SelectedValue</p>
        <select @bind="SelectedValue">
            <option value="@Options[0]">@Options[0]</option>
            <option value="@Options[1]">@Options[1]</option>
            <option value="@Options[2]">@Options[2]</option>
            <option value="@Options[3]">@Options[3]</option>
            <option value="@Options[4]">@Options[4]</option>
            <option value="@Options[5]">@Options[5]</option>
            <option value="@Options[6]">@Options[6]</option>
            <option value="@Options[7]">@Options[7]</option>
        </select>
       
        <button type="submit" class="btn btn-primary" style="width: 100%; padding: 15px; background-color: #007bff; color: white; font-size: 1.2em; border: none; border-radius: 5px; cursor: pointer; transition: background-color 0.3s; margin-top: 35px">
            Create Post
        </button>
        
    </EditForm>
</div>

@code {
    
    //CategorySaver
    private List<string> Options = new List<string> { "Clothing", "Electronics", "Furniture", "Plants", "Animals", "Food", "Cars", "Books" };
    private string SelectedValue { get; set; } // Brug den her til MongoDB
    
    private Post newPost = new Post();
    
    

    private async Task HandleSubmit()
    {
        // MongoDB stuff...

        Console.WriteLine(SelectedValue);
        Console.WriteLine(newPost.Name);
        Console.WriteLine(newPost.Price);
        Console.WriteLine(newPost.Description);
        Console.WriteLine(newPost.ImageUrl);
    }
}
