@page "/CreatePost"
@using Core
@using System.ComponentModel.DataAnnotations
@using MongoDB.Bson

<h3 style="text-align: center; color: #333; margin-bottom: 20px;">Post an Item</h3>

<div class="container" style="max-width: 800px; margin: 50px auto; padding: 30px; background-color: #ffffff; border-radius: 8px; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);">
    <EditForm Model="newPost" OnValidSubmit="HandleSubmit">
        <DataAnnotationsValidator />
        <ValidationSummary />

        <div class="form-group" style="margin-bottom: 20px;">
            <label for="name" style="font-weight: 600; color: #333; font-size: 1.1em;">Name</label>
            <InputText id="name" class="form-control" @bind-Value="newPost.Name" style="width: 100%; padding: 12px; margin-top: 8px; border: 1px solid #ccc; border-radius: 4px;" />
            <ValidationMessage For="() => newPost.Name" style="color: #ff0000; font-size: 0.9em;" />
        </div>

        <div class="form-group" style="margin-bottom: 20px;">
            <label for="price" style="font-weight: 600; color: #333; font-size: 1.1em;">Price</label>
            <InputNumber id="price" class="form-control" @bind-Value="newPost.Price" style="width: 100%; padding: 12px; margin-top: 8px; border: 1px solid #ccc; border-radius: 4px;" />
            <ValidationMessage For="() => newPost.Price" style="color: #ff0000; font-size: 0.9em;" />
        </div>

        <div class="form-group" style="margin-bottom: 20px;">
            <label for="description" style="font-weight: 600; color: #333; font-size: 1.1em;">Description</label>
            <InputTextArea id="description" class="form-control" @bind-Value="newPost.Description" style="width: 100%; padding: 12px; margin-top: 8px; border: 1px solid #ccc; border-radius: 4px;" />
            <ValidationMessage For="() => newPost.Description" style="color: #ff0000; font-size: 0.9em;" />
        </div>

        <div class="form-group" style="margin-bottom: 20px;">
            <label for="imageUrl" style="font-weight: 600; color: #333; font-size: 1.1em;">Image URL (Optional)</label>
            <InputText id="imageUrl" class="form-control" @bind-Value="newPost.ImageUrl" style="width: 100%; padding: 12px; margin-top: 8px; border: 1px solid #ccc; border-radius: 4px;" />
        </div>
        
        
        <p style="font-weight: 600; color: #333; font-size: 1.1em;">Choose Category: @SelectedValue</p>
        <select @bind="CategorySelectedValue">
            <option value="@CategoryOptions[0]">@CategoryOptions[0]</option>
            <option value="@CategoryOptions[1]">@CategoryOptions[1]</option>
            <option value="@CategoryOptions[2]">@CategoryOptions[2]</option>
            <option value="@CategoryOptions[3]">@CategoryOptions[3]</option>
            <option value="@CategoryOptions[4]">@CategoryOptions[4]</option>
            <option value="@CategoryOptions[5]">@CategoryOptions[5]</option>
            <option value="@CategoryOptions[6]">@CategoryOptions[6]</option>
            <option value="@CategoryOptions[7]">@CategoryOptions[7]</option>
        </select>

        <p style="font-weight: 600; color: #333; font-size: 1.1em; margin-top: 40px">Choose a room: @RoomSelectedValue</p>
        <select @bind="RoomSelectedValue">
            <option value="@RoomOptions[0]">@RoomOptions[0]</option>
            <option value="@RoomOptions[1]">@RoomOptions[1]</option>
            <option value="@RoomOptions[2]">@RoomOptions[2]</option>
            <option value="@RoomOptions[3]">@RoomOptions[3]</option>
        </select>
       
        <button type="submit" class="btn btn-primary" style="width: 100%; padding: 15px; background-color: #007bff; color: white; font-size: 1.2em; border: none; border-radius: 5px; cursor: pointer; transition: background-color 0.3s; margin-top: 35px">
            Create Post
        </button>
        
    </EditForm>
</div>

@code {
    
    //CategorySaver
    private List<string> CategoryOptions = new List<string> { "Clothing", "Electronics", "Furniture", "Plants", "Animals", "Food", "Cars", "Books" };
    private string CategorySelectedValue { get; set; } // Brug den her til MongoDB
    
    //RoomPicker
    private List<string> RoomOptions = new List<string> { "Room 12", "Room 74", "Room 102", "Room 132"};
    private string RoomSelectedValue { get; set; } // Brug den her til MongoDB
    
    private Post newPost = new Post();
    
    

    private async Task HandleSubmit()
    {
        // MongoDB stuff...
        
        Console.WriteLine(RoomSelectedValue);
        Console.WriteLine(CategorySelectedValue);
        Console.WriteLine(newPost.Name);
        Console.WriteLine(newPost.Price);
        Console.WriteLine(newPost.Description);
        Console.WriteLine(newPost.ImageUrl);
    }
}
